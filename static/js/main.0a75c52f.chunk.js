(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,e,i){t.exports=i(23)},18:function(t,e,i){},21:function(t,e,i){},23:function(t,e,i){"use strict";i.r(e);var a=i(6),n=i.n(a),o=i(11),r=i.n(o),s=(i(18),i(1)),h=i(2),c=i(5),d=i(3),l=i(4),w=i(8),u=i(0),m=i(9),g=i(12),v=i.n(g),M=(i(20),function(){function t(e){var i=e.width,a=e.height,n=e.rows,o=e.cols;Object(s.a)(this,t),this.width=i,this.height=a,this.rows=n,this.cols=o,this.rowHeight=a/(n-1),this.colWidth=i/(o-1)}return Object(h.a)(t,[{key:"gridToSceneCoordinates",value:function(t){var e=t.row;return{x:t.col*this.colWidth-this.width/2,y:e*this.rowHeight-this.height/2}}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}}]),t}()),S=function(){function t(e){var i=e.grid,a=e.margins,n=e.lineColor;Object(s.a)(this,t),this.BITMAP_PIXELS_PER_MM=10,this.DIMENSIONS={lineWidth:1,starPointRadius:2,starPointLocations:{9:[{row:2,col:2},{row:6,col:2},{row:4,col:4},{row:2,col:6},{row:6,col:6}],13:[{row:3,col:3},{row:9,col:3},{row:6,col:6},{row:3,col:9},{row:9,col:9}],19:[{row:3,col:3},{row:9,col:3},{row:15,col:3},{row:3,col:9},{row:9,col:9},{row:15,col:9},{row:3,col:15},{row:9,col:15},{row:15,col:15}]}},this.grid=i,this.margins=a,this.lineColor=n,this.cssLineColor="#".concat(this.lineColor.toString(16).padStart(6)),this.canvas=document.createElement("canvas");var o=this.grid.getDimensions(),r=o.width,h=o.height;this.canvas.width=(r+a.left+a.right)*this.BITMAP_PIXELS_PER_MM,this.canvas.height=(h+a.top+a.bottom)*this.BITMAP_PIXELS_PER_MM,this.ctx=this.canvas.getContext("2d"),this.ctx.translate(this.canvas.width/2,this.canvas.height/2)}return Object(h.a)(t,[{key:"makeLine",value:function(t,e,i,a){var n=this.ctx;n.beginPath(),n.strokeStyle=this.cssLineColor,n.lineWidth=this.DIMENSIONS.lineWidth*this.BITMAP_PIXELS_PER_MM,n.moveTo(t*this.BITMAP_PIXELS_PER_MM,e*this.BITMAP_PIXELS_PER_MM),n.lineTo(i*this.BITMAP_PIXELS_PER_MM,a*this.BITMAP_PIXELS_PER_MM),n.stroke()}},{key:"makeCircle",value:function(t){var e=t.x,i=t.y,a=t.radius,n=this.ctx;n.beginPath(),n.arc(e*this.BITMAP_PIXELS_PER_MM,i*this.BITMAP_PIXELS_PER_MM,a*this.BITMAP_PIXELS_PER_MM,0,2*Math.PI),n.fillStyle=this.cssLineColor,n.fill()}},{key:"makeTexture",value:function(){for(var t=new u.Texture(this.canvas),e=0;e<this.grid.cols;e++){var i=this.grid.gridToSceneCoordinates({row:0,col:e}),a=i.x,n=i.y,o=this.grid.gridToSceneCoordinates({row:this.grid.rows-1,col:e}),r=o.x,s=o.y;this.makeLine(a,n,r,s)}for(var h=0;h<this.grid.rows;h++){var c=this.grid.gridToSceneCoordinates({row:h,col:0}),d=(a=c.x,n=c.y,this.grid.gridToSceneCoordinates({row:h,col:this.grid.cols-1}));r=d.x,s=d.y;this.makeLine(a,n,r,s)}var l=this.DIMENSIONS.starPointLocations[this.grid.rows]||[],w=!0,m=!1,g=void 0;try{for(var v,M=l[Symbol.iterator]();!(w=(v=M.next()).done);w=!0){var S=v.value,p=S.row,f=S.col,P=this.grid.gridToSceneCoordinates({row:p,col:f}),I=P.x,b=P.y;this.makeCircle({x:I,y:b,radius:this.DIMENSIONS.starPointRadius})}}catch(E){m=!0,g=E}finally{try{w||null==M.return||M.return()}finally{if(m)throw g}}return t.needsUpdate=!0,t}}]),t}(),p=function(){function t(e){var i=e.rows,a=e.cols;Object(s.a)(this,t),this.DIMENSIONS={rowHeight:23.7,colWidth:22,margins:{top:13.95,left:14.1,bottom:13.95,right:14.1},thickness:38.1,starPointRadius:2},this.rows=i,this.cols=a,this.grid=new M({width:this.DIMENSIONS.colWidth*a,height:this.DIMENSIONS.rowHeight*i,rows:i,cols:a})}return Object(h.a)(t,[{key:"getDimensions",value:function(){var t=this.grid.getDimensions(),e=t.width,i=t.height,a=this.DIMENSIONS.margins;return{width:e+a.left+a.right,height:i+a.top+a.bottom,depth:this.DIMENSIONS.thickness}}},{key:"makeBoard",value:function(){var t=this.getDimensions(),e=t.width,i=t.height,a=t.depth,n=new u.BoxBufferGeometry(e,i,a);n.translate(0,0,-a/2),n.addGroup(24,6,6);var o=new u.MeshPhongMaterial({map:(new u.TextureLoader).load("/assets/textures/walnut.jpg")}),r=new S({grid:this.grid,margins:this.DIMENSIONS.margins,lineColor:16501003}),s=new u.MeshBasicMaterial({map:r.makeTexture(),transparent:!0}),h=new u.MeshPhongMaterial({map:(new u.TextureLoader).load("/assets/textures/walnut.jpg"),normalMap:(new u.TextureLoader).load("/assets/textures/walnut_normal.jpg")}),c=h,d=new u.Mesh(n,[h,h,c,c,o,o,s]);return d.receiveShadow=!0,d}},{key:"getSceneObject",value:function(){return this.makeBoard()}},{key:"update",value:function(){}}]),t}(),f=function(){function t(e){var i=e.material,a=e.color;Object(s.a)(this,t),this.DIMENSIONS={radius:12,thickness:9.8},this.material=i,this.color=a}return Object(h.a)(t,[{key:"makeStone",value:function(){var t=this.DIMENSIONS.radius,e=this.DIMENSIONS.thickness/2,i=(t*t+e*e)/(2*e),a=Math.atan(t/(i-e)),n=new u.SphereGeometry(i,32,32,0,2*Math.PI,0,a),o=new u.Mesh(n);o.rotation.x=u.Math.degToRad(90),o.position.z=-(i-e),o.updateMatrix();var r=new u.Mesh(n);r.rotation.x=u.Math.degToRad(-90),r.position.z=i-e,r.updateMatrix();var s=new u.Geometry;s.merge(o.geometry,o.matrix),s.merge(r.geometry,r.matrix);var h=this.material||new u.MeshBasicMaterial({color:this.color}),c=new u.Mesh(s,h);return c.position.z=e,c.castShadow=!0,c.receiveShadow=!0,c}},{key:"getSceneObject",value:function(){return this.makeStone()}},{key:"update",value:function(){}}]),t}(),P=function(){function t(e){var i=e.canvas;Object(s.a)(this,t);var a=new u.Scene,n=new u.PerspectiveCamera(60,1,.1,1e3),o=i.getContext("webgl2"),r=new u.WebGLRenderer({canvas:i,context:o,antialias:!0});r.setPixelRatio(window.devicePixelRatio),r.shadowMap.enabled=!0,r.shadowMap.soft=!0;var h=new m.a(r),c=[new m.b(a,n)];c[c.length-1].renderToScreen=!0,c.map(h.addPass.bind(h)),this.composer=h,this.clock=new u.Clock,this.canvas=i,this.scene=a,this.camera=n,this.renderer=r;var d=new v.a(n,r.domElement),l=Math.PI/2;d.minPolarAngle=Math.PI/2-l,d.maxPolarAngle=Math.PI/2+l,d.maxDistance=500,d.zoomSpeed=.3,d.enablePan=!1,this.controls=d,this.board=new p({rows:19,cols:19});var w=new u.AmbientLight(16777215,.4);a.add(w);var g=new u.DirectionalLight(16777215,.4);g.position.set(30,30,50),g.castShadow=!0,g.shadowCameraVisible=!0,g.shadowCameraLeft=-250,g.shadowCameraRight=250,g.shadowCameraTop=250,g.shadowCameraBottom=-250,g.shadowCameraNear=20,g.shadowCameraFar=200,a.add(g);var M=new u.PointLight(16777215,.1);n.add(M),a.add(n);var S=this.board.getDimensions(),P=S.width,I=S.height;this.camera.position.z=Math.max(P,I)/2/Math.tan(u.Math.degToRad(this.camera.fov/2)),a.add(this.board.getSceneObject());var b=new f({material:new u.MeshPhongMaterial({color:3355443})}).getSceneObject();a.add(b);var E=new f({material:new u.MeshPhongMaterial({color:16777215})}).getSceneObject(),y=this.board.grid.gridToSceneCoordinates({row:8,col:8}),k=y.x,x=y.y;E.position.x=k,E.position.y=x,a.add(E)}return Object(h.a)(t,[{key:"animate",value:function(t){this.controls.update();var e=t.width,i=t.height;e===this.lastWidth&&i===this.lastHeight||(this.composer.setSize(e,i),this.renderer.setSize(e,i),this.camera.aspect=e/i,this.camera.updateProjectionMatrix(),this.lastWidth=e,this.lastHeight=i),this.composer.render(this.scene,this.camera)}}]),t}(),I=function(t){function e(t){var i;return Object(s.a)(this,e),(i=Object(c.a)(this,Object(d.a)(e).call(this,t))).canvasRef=n.a.createRef(),i}return Object(l.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return n.a.createElement("canvas",{id:"main",ref:this.canvasRef})}},{key:"componentDidMount",value:function(){var t=this,e=new P({canvas:this.canvasRef.current});!function i(){t.animationFrameRequest=requestAnimationFrame(i),e.animate({width:t.props.width,height:t.props.height})}()}}]),e}(a.Component);i(21);window.THREE=u;var b=function(t){function e(t){var i;return Object(s.a)(this,e),(i=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={width:1,height:1},i.boundUpdateDimensions=i.updateDimensions.bind(Object(w.a)(Object(w.a)(i))),i}return Object(l.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return n.a.createElement(I,{width:this.state.width,height:this.state.height})}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.boundUpdateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.boundUpdateDimensions)}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.0a75c52f.chunk.js.map